---
export const prerender = false;

import BaseLayout from '../../layouts/BaseLayout.astro';
import BackLink from '../../components/BackLink.astro';
import { getAccessEmail } from '../../lib/auth';
import { SITE } from '../../lib/constants';

const email = await getAccessEmail(Astro.request);

if (!email) {
  return Astro.redirect('/private');
}
---

<BaseLayout title={`Contact â€” ${SITE.name}`} description="Private contact information">
  <section class="contact">
    <div class="container container--narrow">
      <BackLink href="/private" label="Back to private area" />

      <h1 class="contact__title">Contact Info</h1>

      <div class="contact__grid">
        <div class="contact__item">
          <span class="contact__label">Email</span>
          <a href={`mailto:${SITE.email}`} class="contact__value">{SITE.email}</a>
        </div>

        <div class="contact__item">
          <span class="contact__label">GitHub</span>
          <a href={SITE.github} class="contact__value" target="_blank" rel="noopener noreferrer">
            {SITE.github.replace('https://', '')}
            <span class="sr-only"> (opens in new window)</span>
          </a>
        </div>

        <div class="contact__item">
          <span class="contact__label">Location</span>
          <span class="contact__value">Melbourne, Australia</span>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .contact {
    padding: var(--space-3xl) 0;
  }

  .contact__title {
    font-size: var(--text-3xl);
    margin-bottom: var(--space-2xl);
  }

  .contact__grid {
    display: flex;
    flex-direction: column;
    gap: var(--space-lg);
  }

  .contact__item {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
    padding: var(--space-lg);
    background: var(--color-bg-raised);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
  }

  .contact__label {
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    color: var(--color-text-faint);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .contact__value {
    font-size: var(--text-lg);
    color: var(--color-text);

    &:is(a):hover {
      color: var(--color-accent);
    }
  }
</style>
